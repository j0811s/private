!function(){"use strict";function e(e,o){for(var t=0;t<o.length;t++){var s=o[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var o=this;do{if(Element.prototype.matches.call(o,e))return o;o=o.parentElement||o.parentNode}while(null!==o&&1===o.nodeType);return null});var o=function(){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var t=window.navigator.userAgent.toLowerCase();this.isiOS=t.indexOf("iphone")>-1||t.indexOf("ipad")>-1||t.indexOf("macintosh")>-1&&"ontouchend"in document;var s={modal:".js-lpc-modal",trigger:{open:".js-lpc-modal_trigger",noCloseSelectorNames:[],noCloseClassNames:[]}};this.overwriteProperty(s,e),this.modalName=s.modal,this.modalWrapper=document.querySelectorAll(this.modalName),this.openTrigger=document.querySelectorAll(s.trigger.open),this.noCloseSelectorNames=s.trigger.noCloseSelectorNames,this.noCloseClassNames=s.trigger.noCloseClassNames,s.on&&(this.beforeOpen=s.on.beforeOpen,this.afterOpen=s.on.afterOpen,this.beforeClose=s.on.beforeClose,this.afterClose=s.on.afterClose),this.scrollPosition,this.execute()}var t,s,n;return t=o,(s=[{key:"nodeEach",value:function(e,o){[].slice.call(e).forEach(o)}},{key:"overwriteProperty",value:function(e,o){for(var t in o)e[t]=o[t];return e}},{key:"bodyFixedOn",value:function(){this.isiOS?(this.scrollPosition=window.pageYOffset,document.body.classList.add("is-m_fixed"),document.body.style.top="-".concat(this.scrollPosition,"px")):document.body.classList.add("is-m_hidden")}},{key:"bodyFixedOff",value:function(){this.isiOS?(document.body.classList.remove("is-m_fixed"),document.body.style.removeProperty("top"),window.scrollTo(0,this.scrollPosition)):document.body.classList.remove("is-m_hidden")}},{key:"setOpen",value:function(){var e=this;this.nodeEach(this.openTrigger,(function(o,t){o.addEventListener("click",(function(o){o.preventDefault(),e.beforeOpen&&e.beforeOpen(o),e.bodyFixedOn(),e.modalWrapper[t].classList.add("is-open"),e.afterOpen&&e.afterOpen(o)}))}))}},{key:"isExclusionSelector",value:function(e){if(void 0!==this.noCloseSelectorNames)return this.noCloseSelectorNames.includes(e.target.localName)}},{key:"isExclusionClass",value:function(e){var o=this;if(void 0!==this.noCloseClassNames)return e.target.className.split(" ").some((function(e){return o.noCloseClassNames.includes(e)}))}},{key:"setClose",value:function(){var e=this;this.nodeEach(this.modalWrapper,(function(o){o.addEventListener("click",(function(t){if(e.isExclusionSelector(t)||e.isExclusionClass(t))return t.preventDefault(),!1;e.beforeClose&&e.beforeClose(t),e.bodyFixedOff(),o.classList.remove("is-open"),e.afterClose&&e.afterClose(t)}))}))}},{key:"execute",value:function(){this.setOpen(),this.setClose()}}])&&e(t.prototype,s),n&&e(t,n),o}();new o({on:{beforeOpen:function(e){console.log("beforeOpen"),document.body.classList.add("add-beforeOpen")},afterOpen:function(e){console.log("afterOpen"),setTimeout((function(){document.body.classList.remove("add-beforeOpen")}),1e3)}}}),new o({modal:".js-lpc-modal2",trigger:{open:".js-lpc-modal_trigger2",noCloseSelectorNames:["a","figure","img"],noCloseClassNames:["mod-noModalClose","mod-sample"]},on:{beforeClose:function(e){console.log("beforeClose"),document.body.classList.add("add-afterOpen")},afterClose:function(e){setTimeout((function(){document.body.classList.remove("add-afterOpen")}),1e3),console.log("afterClose")}}})}();